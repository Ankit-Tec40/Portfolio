<!DOCTYPE html>
<html lang="en" ng-app="portfolioApp" ng-cloak>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ankit Kumar | Portfolio</title>

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>

  <style>
    * {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: linear-gradient(to bottom, #f4f4f4, #eaeaea);
      color: #333;
    }

    header,
    footer {
      background: #2c3e50;
      color: white;
      text-align: center;
      padding: 2rem 1rem;
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 2rem;
      background: #34495e;
      padding: 1rem;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    .container {
      padding: 2rem;
      max-width: 1200px;
      margin: auto;
    }

    h2 {
      color: #2c3e50;
      border-bottom: 2px solid #ccc;
      padding-bottom: 0.5rem;
    }

    .card {
      background: white;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    ul {
      list-style: none;
      padding-left: 1rem;
    }

    li::before {
      content: '✔️';
      margin-right: 0.5rem;
    }

    footer a {
      color: #00aced;
      text-decoration: none;
    }
  </style>
</head>

<body ng-controller="PortfolioController">

  <header>
    <h1>{{data.PersonalInfos.Name}}</h1>
    <p>{{data.PersonalInfos.Heading}}</p>
    <p>{{data.PersonalInfos.Gmail}} | {{data.PersonalInfos.PhoneNumber}}</p>
  </header>

  <nav>
    <a href="#summary">Summary</a>
    <a href="#experience">Experience</a>
    <a href="#projects">Projects</a>
    <a href="#certs">Certifications</a>
    <a href="#skills">Skills</a>
    <a href="#education">Education</a>
    <a href="#languages">Languages</a>
  </nav>

  <div class="container">

    <!-- SUMMARY -->
    <div id="summary">
      <h2>Summary</h2>
      <p>{{data.Summary}}</p>
    </div>

    <!-- EXPERIENCE -->
    <div id="experience" ng-if="data.WorkExperience && data.WorkExperience.length">
      <h2>Work Experience</h2>

      <div class="card" ng-repeat="job in data.WorkExperience">
        <h3>{{job.Role}} @ {{job.CompanyName}}</h3>
        <p>{{job.StartDate}} – {{job.EndDate}} | {{job.Location}}</p>

        <ul>
          <li ng-repeat="r in job.Responsibilities">{{r}}</li>
        </ul>

        <div ng-if="job.Projects && job.Projects.length">
          <h4>Company Projects</h4>

          <div class="card" ng-repeat="p in job.Projects">
            <strong>{{p.ProjectName}}</strong>
            <p>{{p.Description}}</p>
            <p><strong>Tech:</strong> {{p.TechUsed.join(', ')}}</p>
            <p><strong>Outcome:</strong> {{p.Outcome}}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- PERSONAL PROJECTS -->
    <div id="projects" ng-if="data.PersonalProjects && data.PersonalProjects.length">
      <h2>Personal Projects</h2>

      <div class="card" ng-repeat="proj in data.PersonalProjects">
        <h3>{{proj.ProjectName}}</h3>
        <p>{{proj.Description}}</p>
        <p><strong>Tech:</strong> {{proj.TechUsed.join(', ')}}</p>
        <p><strong>Role:</strong> {{proj.Role}}</p>

        <ul ng-if="proj.Highlights && proj.Highlights.length">
          <li ng-repeat="h in proj.Highlights">{{h}}</li>
        </ul>
      </div>
    </div>

    <!-- CERTIFICATIONS -->
    <div id="certs" ng-if="data.Certifications && data.Certifications.length">
      <h2>Certifications</h2>

      <div class="card" ng-repeat="c in data.Certifications">
        <strong>{{c.Title}}</strong> – {{c.Issuer}}
        <p>{{c.IssueDate}}</p>
        <p><strong>Skills:</strong> {{c.Skills.join(', ')}}</p>
      </div>
    </div>

    <!-- SKILLS (FIXED & SAFE) -->
    <div id="skills" ng-if="data.Skills">
      <h2>Skills</h2>

      <div class="card" ng-if="data.Skills.PrimarySkills && data.Skills.PrimarySkills.length">
        <h3>Primary Skills</h3>

        <div ng-repeat="s in data.Skills.PrimarySkills" ng-if="s.Items && s.Items.length">
          <p><strong>{{s.Category}}:</strong> {{s.Items.join(', ')}}</p>
        </div>
      </div>

      <div class="card" ng-if="data.Skills.FamiliarWith && data.Skills.FamiliarWith.length">
        <h3>Familiar With</h3>

        <div ng-repeat="s in data.Skills.FamiliarWith" ng-if="s.Items && s.Items.length">
          <p><strong>{{s.Category}}:</strong> {{s.Items.join(', ')}}</p>
        </div>
      </div>
    </div>

    <!-- EDUCATION -->
    <div id="education" ng-if="data.Education && data.Education.length">
      <h2>Education</h2>
      <div class="card">
        <strong>{{data.Education[0].Degree}}</strong><br>
        {{data.Education[0].College}} ({{data.Education[0].StartYear}} – {{data.Education[0].EndYear}})
        | CGPA: {{data.Education[0].CGPA}}
      </div>
    </div>

    <!-- LANGUAGES -->
    <div id="languages" ng-if="data.LanguagesKnown && data.LanguagesKnown.length">
      <h2>Languages Known</h2>
      <div class="card">
        {{data.LanguagesKnown.join(', ')}}
      </div>
    </div>

  </div>

  <footer>
    <p>
      <a href="{{data.Profiles.LinkedIn}}" target="_blank">LinkedIn</a> |
      <a href="{{data.Profiles.GitHub}}" target="_blank">GitHub</a>
    </p>
  </footer>

  <script>
    angular.module('portfolioApp', [])
      .controller('PortfolioController', function ($scope, $http) {

        $http.get('mydata.json').then(function (response) {

          // remove all -off keys (top-level only)
          const clean = {};
          for (const key in response.data) {
            if (!key.endsWith('-off')) {
              clean[key] = response.data[key];
            }
          }

          $scope.data = clean;
        });

      });
  </script>

</body>

</html>